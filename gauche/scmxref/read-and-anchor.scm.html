<html>
<body>
<a href="../scmxref/index.html">index</a>
<pre>
(<a href="http://practical-scheme.net/gauche/man/?l=en&p=define-module">define-module</a> <a href="read-and-anchor.scm.html#read-and-anchor.scm:1">scmxref.read-and-anchor</a>
<a name="read-and-anchor.scm:2"></a>  (<a href="http://practical-scheme.net/gauche/man/?l=en&p=use">use</a> <a href="http://practical-scheme.net/gauche/man/?l=en&p=gauche.parameter">gauche.parameter</a>)
<a name="read-and-anchor.scm:3"></a>  (<a href="http://practical-scheme.net/gauche/man/?l=en&p=use">use</a> <a href="path-util.scm.html#path-util.scm:1">scmxref.path-util</a>)
<a name="read-and-anchor.scm:4"></a>  (<a href="http://practical-scheme.net/gauche/man/?l=en&p=extend">extend</a> <a href="dictionary.scm.html#dictionary.scm:1">scmxref.dictionary</a>))
<a name="read-and-anchor.scm:5"></a>(<a href="http://practical-scheme.net/gauche/man/?l=en&p=select-module">select-module</a> <a href="read-and-anchor.scm.html#read-and-anchor.scm:1">scmxref.read-and-anchor</a>)
<a name="read-and-anchor.scm:6"></a>
<a name="read-and-anchor.scm:7"></a>;; options
<a name="read-and-anchor.scm:8"></a>(<a href="http://practical-scheme.net/gauche/man/?l=en&p=define">define</a> <a href="read-and-anchor.scm.html#read-and-anchor.scm:8">anchor-all-lines</a>      (<a href="http://practical-scheme.net/gauche/man/?l=en&p=make-parameter">make-parameter</a> #f))
<a name="read-and-anchor.scm:9"></a>(<a href="http://practical-scheme.net/gauche/man/?l=en&p=define">define</a> <a href="read-and-anchor.scm.html#read-and-anchor.scm:9">anchor-file-extension</a> (<a href="http://practical-scheme.net/gauche/man/?l=en&p=make-parameter">make-parameter</a> ".html"))
<a name="read-and-anchor.scm:10"></a>(<a href="http://practical-scheme.net/gauche/man/?l=en&p=define">define</a> <a href="read-and-anchor.scm.html#read-and-anchor.scm:10">place-goto-anchor</a>     (<a href="http://practical-scheme.net/gauche/man/?l=en&p=make-parameter">make-parameter</a> #f))
<a name="read-and-anchor.scm:11"></a>(<a href="http://practical-scheme.net/gauche/man/?l=en&p=define">define</a> <a href="read-and-anchor.scm.html#read-and-anchor.scm:11">gauche-man-base</a>       (<a href="http://practical-scheme.net/gauche/man/?l=en&p=make-parameter">make-parameter</a> "http://practical-scheme.net/gauche/man/?l=en&amp;p="))
<a name="read-and-anchor.scm:12"></a>;;;
<a name="read-and-anchor.scm:13"></a>;;;  read-and-anchor
<a name="read-and-anchor.scm:14"></a>;;;
<a name="read-and-anchor.scm:15"></a>(<a href="http://practical-scheme.net/gauche/man/?l=en&p=define">define</a> (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> x)
<a name="read-and-anchor.scm:16"></a>  (<a href="http://practical-scheme.net/gauche/man/?l=en&p=cond">cond</a> ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=not">not</a> (<a href="http://practical-scheme.net/gauche/man/?l=en&p=char?">char?</a> x))
<a name="read-and-anchor.scm:17"></a>         (<a href="http://practical-scheme.net/gauche/man/?l=en&p=with-input-from-string">with-input-from-string</a> (<a href="http://practical-scheme.net/gauche/man/?l=en&p=x->string">x->string</a> x)
<a name="read-and-anchor.scm:18"></a>           (<a href="http://practical-scheme.net/gauche/man/?l=en&p=lambda">lambda</a> ()
<a name="read-and-anchor.scm:19"></a>             (<a href="http://practical-scheme.net/gauche/man/?l=en&p=port-for-each">port-for-each</a> <a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> <a href="http://practical-scheme.net/gauche/man/?l=en&p=read-char">read-char</a>))))
<a name="read-and-anchor.scm:20"></a>        ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=char=?">char=?</a> #\&lt; x)
<a name="read-and-anchor.scm:21"></a>         (<a href="http://practical-scheme.net/gauche/man/?l=en&p=display">display</a> "&amp;lt;"))
<a name="read-and-anchor.scm:22"></a>        ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=char=?">char=?</a> #\&gt; x)
<a name="read-and-anchor.scm:23"></a>         (<a href="http://practical-scheme.net/gauche/man/?l=en&p=display">display</a> "&amp;gt;"))
<a name="read-and-anchor.scm:24"></a>        ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=char=?">char=?</a> #\&amp; x)
<a name="read-and-anchor.scm:25"></a>         (<a href="http://practical-scheme.net/gauche/man/?l=en&p=display">display</a> "&amp;amp;"))
<a name="read-and-anchor.scm:26"></a>        (<a href="http://practical-scheme.net/gauche/man/?l=en&p=else">else</a>
<a name="read-and-anchor.scm:27"></a>         (<a href="http://practical-scheme.net/gauche/man/?l=en&p=display">display</a> x))))
<a name="read-and-anchor.scm:28"></a>
<a name="read-and-anchor.scm:29"></a>(<a href="http://practical-scheme.net/gauche/man/?l=en&p=define">define</a> <a href="read-and-anchor.scm.html#read-and-anchor.scm:29">symbol-initial</a>  #[A-Za-z!$%&amp;*/:&lt;=&gt;?\^~+\-])
<a name="read-and-anchor.scm:30"></a>(<a href="http://practical-scheme.net/gauche/man/?l=en&p=define">define</a> <a href="read-and-anchor.scm.html#read-and-anchor.scm:30">symbol-char-set</a> #[\w!$%&amp;*/:&lt;=&gt;?\^~+\-@.])
<a name="read-and-anchor.scm:31"></a>
<a name="read-and-anchor.scm:32"></a>(<a href="http://practical-scheme.net/gauche/man/?l=en&p=define">define</a> (<a href="read-and-anchor.scm.html#read-and-anchor.scm:32">read-string-w/o-escape</a> ch lis)
<a name="read-and-anchor.scm:33"></a>  (<a href="http://practical-scheme.net/gauche/man/?l=en&p=cond">cond</a> ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=eof-object?">eof-object?</a> ch) (<a href="http://practical-scheme.net/gauche/man/?l=en&p=error">error</a> "EOF inside string"))
<a name="read-and-anchor.scm:34"></a>        ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=char=?">char=?</a> #\"  ch) (<a href="http://practical-scheme.net/gauche/man/?l=en&p=apply">apply</a> <a href="http://practical-scheme.net/gauche/man/?l=en&p=string">string</a> (<a href="http://practical-scheme.net/gauche/man/?l=en&p=reverse">reverse</a> lis)))
<a name="read-and-anchor.scm:35"></a>        ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=char=?">char=?</a> #\\  ch)
<a name="read-and-anchor.scm:36"></a>         (<a href="http://practical-scheme.net/gauche/man/?l=en&p=let">let</a> ((x (<a href="http://practical-scheme.net/gauche/man/?l=en&p=read-char">read-char</a>)))
<a name="read-and-anchor.scm:37"></a>           (<a href="read-and-anchor.scm.html#read-and-anchor.scm:32">read-string-w/o-escape</a> (<a href="http://practical-scheme.net/gauche/man/?l=en&p=read-char">read-char</a>)
<a name="read-and-anchor.scm:38"></a>                                   (<a href="http://practical-scheme.net/gauche/man/?l=en&p=cons">cons</a> x (<a href="http://practical-scheme.net/gauche/man/?l=en&p=cons">cons</a> ch lis)))))
<a name="read-and-anchor.scm:39"></a>        (<a href="http://practical-scheme.net/gauche/man/?l=en&p=else">else</a>
<a name="read-and-anchor.scm:40"></a>         (<a href="read-and-anchor.scm.html#read-and-anchor.scm:32">read-string-w/o-escape</a> (<a href="http://practical-scheme.net/gauche/man/?l=en&p=read-char">read-char</a>)
<a name="read-and-anchor.scm:41"></a>                                 (<a href="http://practical-scheme.net/gauche/man/?l=en&p=cons">cons</a> ch lis)))))
<a name="read-and-anchor.scm:42"></a>
<a name="read-and-anchor.scm:43"></a>(<a href="http://practical-scheme.net/gauche/man/?l=en&p=define">define</a> (<a href="read-and-anchor.scm.html#read-and-anchor.scm:43">read-symbol</a> ch lis)
<a name="read-and-anchor.scm:44"></a>
<a name="read-and-anchor.scm:45"></a>  (<a href="http://practical-scheme.net/gauche/man/?l=en&p=define">define</a> (list-&gt;symbol lis)
<a name="read-and-anchor.scm:46"></a>    (<a href="http://practical-scheme.net/gauche/man/?l=en&p=string->symbol">string->symbol</a> (<a href="http://practical-scheme.net/gauche/man/?l=en&p=apply">apply</a> <a href="http://practical-scheme.net/gauche/man/?l=en&p=string">string</a> (<a href="http://practical-scheme.net/gauche/man/?l=en&p=reverse">reverse</a> lis))))
<a name="read-and-anchor.scm:47"></a>
<a name="read-and-anchor.scm:48"></a>  (<a href="http://practical-scheme.net/gauche/man/?l=en&p=cond">cond</a> ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=eof-object?">eof-object?</a> ch) (list-&gt;symbol lis))
<a name="read-and-anchor.scm:49"></a>        ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=char-set-contains?">char-set-contains?</a> <a href="read-and-anchor.scm.html#read-and-anchor.scm:30">symbol-char-set</a> ch)
<a name="read-and-anchor.scm:50"></a>         (<a href="http://practical-scheme.net/gauche/man/?l=en&p=read-char">read-char</a>)
<a name="read-and-anchor.scm:51"></a>         (<a href="read-and-anchor.scm.html#read-and-anchor.scm:43">read-symbol</a> (<a href="http://practical-scheme.net/gauche/man/?l=en&p=peek-char">peek-char</a>) (<a href="http://practical-scheme.net/gauche/man/?l=en&p=cons">cons</a> ch lis)))
<a name="read-and-anchor.scm:52"></a>        (<a href="http://practical-scheme.net/gauche/man/?l=en&p=else">else</a>
<a name="read-and-anchor.scm:53"></a>         (list-&gt;symbol lis))))
<a name="read-and-anchor.scm:54"></a>
<a name="read-and-anchor.scm:55"></a>(<a href="http://practical-scheme.net/gauche/man/?l=en&p=define">define</a> (<a href="read-and-anchor.scm.html#read-and-anchor.scm:55">do-newline</a>)
<a name="read-and-anchor.scm:56"></a>  (<a href="http://practical-scheme.net/gauche/man/?l=en&p=newline">newline</a>)
<a name="read-and-anchor.scm:57"></a>  (<a href="http://practical-scheme.net/gauche/man/?l=en&p=if">if</a> (<a href="read-and-anchor.scm.html#read-and-anchor.scm:8">anchor-all-lines</a>)
<a name="read-and-anchor.scm:58"></a>    (<a href="read-and-anchor.scm.html#read-and-anchor.scm:241">anchor-line</a>))
<a name="read-and-anchor.scm:59"></a>  'newline)
<a name="read-and-anchor.scm:60"></a>
<a name="read-and-anchor.scm:61"></a>(<a href="http://practical-scheme.net/gauche/man/?l=en&p=define">define</a> (<a href="read-and-anchor.scm.html#read-and-anchor.scm:61">do-sharp</a> lvl)
<a name="read-and-anchor.scm:62"></a>
<a name="read-and-anchor.scm:63"></a>  (<a href="http://practical-scheme.net/gauche/man/?l=en&p=define">define</a> (do-debug)
<a name="read-and-anchor.scm:64"></a>    (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> (<a href="http://practical-scheme.net/gauche/man/?l=en&p=read-char">read-char</a>)) ; #\?
<a name="read-and-anchor.scm:65"></a>    (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> (<a href="http://practical-scheme.net/gauche/man/?l=en&p=read-char">read-char</a>)) ; must be '='
<a name="read-and-anchor.scm:66"></a>    'debug-print)
<a name="read-and-anchor.scm:67"></a>
<a name="read-and-anchor.scm:68"></a>  (<a href="http://practical-scheme.net/gauche/man/?l=en&p=define">define</a> (do-vector)
<a name="read-and-anchor.scm:69"></a>    ;; read as a list!
<a name="read-and-anchor.scm:70"></a>    (<a href="read-and-anchor.scm.html#read-and-anchor.scm:254">read-and-anchor</a> lvl) ; #\( is passed
<a name="read-and-anchor.scm:71"></a>    'venctor)
<a name="read-and-anchor.scm:72"></a>
<a name="read-and-anchor.scm:73"></a>  (<a href="http://practical-scheme.net/gauche/man/?l=en&p=define">define</a> (do-regexp)
<a name="read-and-anchor.scm:74"></a>    (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> (<a href="http://practical-scheme.net/gauche/man/?l=en&p=read-char">read-char</a>)) ; #\/
<a name="read-and-anchor.scm:75"></a>    (<a href="http://practical-scheme.net/gauche/man/?l=en&p=let">let</a> lp ((ch (<a href="http://practical-scheme.net/gauche/man/?l=en&p=read-char">read-char</a>)))
<a name="read-and-anchor.scm:76"></a>      (<a href="http://practical-scheme.net/gauche/man/?l=en&p=cond">cond</a> ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=eof-object?">eof-object?</a> ch) (<a href="http://practical-scheme.net/gauche/man/?l=en&p=error">error</a> "EOF inside regexp"))
<a name="read-and-anchor.scm:77"></a>            ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=char=?">char=?</a> #\/ ch)  (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> ch) 'regexp)
<a name="read-and-anchor.scm:78"></a>            ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=char=?">char=?</a> #\\ ch)
<a name="read-and-anchor.scm:79"></a>             (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> ch)
<a name="read-and-anchor.scm:80"></a>             (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> (<a href="http://practical-scheme.net/gauche/man/?l=en&p=read-char">read-char</a>))
<a name="read-and-anchor.scm:81"></a>             (lp (<a href="http://practical-scheme.net/gauche/man/?l=en&p=read-char">read-char</a>)))
<a name="read-and-anchor.scm:82"></a>            (<a href="http://practical-scheme.net/gauche/man/?l=en&p=else">else</a>
<a name="read-and-anchor.scm:83"></a>             (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> ch)
<a name="read-and-anchor.scm:84"></a>             (lp (<a href="http://practical-scheme.net/gauche/man/?l=en&p=read-char">read-char</a>))))))
<a name="read-and-anchor.scm:85"></a>
<a name="read-and-anchor.scm:86"></a>  (<a href="http://practical-scheme.net/gauche/man/?l=en&p=define">define</a> (do-char-set)
<a name="read-and-anchor.scm:87"></a>    (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> (<a href="http://practical-scheme.net/gauche/man/?l=en&p=read-char">read-char</a>)) ; #\[
<a name="read-and-anchor.scm:88"></a>    (<a href="http://practical-scheme.net/gauche/man/?l=en&p=let">let</a> lp ((ch (<a href="http://practical-scheme.net/gauche/man/?l=en&p=read-char">read-char</a>)))
<a name="read-and-anchor.scm:89"></a>      (<a href="http://practical-scheme.net/gauche/man/?l=en&p=cond">cond</a> ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=eof-object?">eof-object?</a> ch) (<a href="http://practical-scheme.net/gauche/man/?l=en&p=error">error</a> "EOF inside char-set"))
<a name="read-and-anchor.scm:90"></a>            ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=char=?">char=?</a> #\] ch)  (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> ch) 'char-set)
<a name="read-and-anchor.scm:91"></a>            ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=char=?">char=?</a> #\\ ch)
<a name="read-and-anchor.scm:92"></a>             (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> ch)
<a name="read-and-anchor.scm:93"></a>             (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> (<a href="http://practical-scheme.net/gauche/man/?l=en&p=read-char">read-char</a>))
<a name="read-and-anchor.scm:94"></a>             (lp (<a href="http://practical-scheme.net/gauche/man/?l=en&p=read-char">read-char</a>)))
<a name="read-and-anchor.scm:95"></a>            (<a href="http://practical-scheme.net/gauche/man/?l=en&p=else">else</a>
<a name="read-and-anchor.scm:96"></a>             (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> ch)
<a name="read-and-anchor.scm:97"></a>             (lp (<a href="http://practical-scheme.net/gauche/man/?l=en&p=read-char">read-char</a>))))))
<a name="read-and-anchor.scm:98"></a>
<a name="read-and-anchor.scm:99"></a>  (<a href="http://practical-scheme.net/gauche/man/?l=en&p=define">define</a> (do-multiline-comment)
<a name="read-and-anchor.scm:100"></a>    (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> (<a href="http://practical-scheme.net/gauche/man/?l=en&p=read-char">read-char</a>)) ; #\|
<a name="read-and-anchor.scm:101"></a>    (<a href="http://practical-scheme.net/gauche/man/?l=en&p=let">let</a> lp ((ch (<a href="http://practical-scheme.net/gauche/man/?l=en&p=read-char">read-char</a>))
<a name="read-and-anchor.scm:102"></a>             (n 0))
<a name="read-and-anchor.scm:103"></a>      (<a href="http://practical-scheme.net/gauche/man/?l=en&p=cond">cond</a> ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=eof-object?">eof-object?</a> ch) (<a href="http://practical-scheme.net/gauche/man/?l=en&p=error">error</a> "EOF inside comment"))
<a name="read-and-anchor.scm:104"></a>            ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=char=?">char=?</a> #\| ch)
<a name="read-and-anchor.scm:105"></a>             (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> ch)
<a name="read-and-anchor.scm:106"></a>             (<a href="http://practical-scheme.net/gauche/man/?l=en&p=let">let</a> ((ch (<a href="http://practical-scheme.net/gauche/man/?l=en&p=read-char">read-char</a>)))
<a name="read-and-anchor.scm:107"></a>               (<a href="http://practical-scheme.net/gauche/man/?l=en&p=cond">cond</a> ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=char=?">char=?</a> #\# ch)
<a name="read-and-anchor.scm:108"></a>                      (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> ch)
<a name="read-and-anchor.scm:109"></a>                      (<a href="http://practical-scheme.net/gauche/man/?l=en&p=if">if</a> (<a href="http://practical-scheme.net/gauche/man/?l=en&p==">=</a> n 0)
<a name="read-and-anchor.scm:110"></a>                        'multiline-comment
<a name="read-and-anchor.scm:111"></a>                        (lp (<a href="http://practical-scheme.net/gauche/man/?l=en&p=read-char">read-char</a>) (<a href="http://practical-scheme.net/gauche/man/?l=en&p=-">-</a> n 1))))
<a name="read-and-anchor.scm:112"></a>                     (<a href="http://practical-scheme.net/gauche/man/?l=en&p=else">else</a>
<a name="read-and-anchor.scm:113"></a>                      (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> ch)
<a name="read-and-anchor.scm:114"></a>                      (lp (<a href="http://practical-scheme.net/gauche/man/?l=en&p=read-char">read-char</a>) n)))))
<a name="read-and-anchor.scm:115"></a>            ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=char=?">char=?</a> #\# ch)
<a name="read-and-anchor.scm:116"></a>             (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> ch)
<a name="read-and-anchor.scm:117"></a>             (<a href="http://practical-scheme.net/gauche/man/?l=en&p=let">let</a> ((ch (<a href="http://practical-scheme.net/gauche/man/?l=en&p=read-char">read-char</a>)))
<a name="read-and-anchor.scm:118"></a>               (<a href="http://practical-scheme.net/gauche/man/?l=en&p=cond">cond</a> ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=eof-object?">eof-object?</a> ch) (<a href="http://practical-scheme.net/gauche/man/?l=en&p=error">error</a> "EOF inside comment"))
<a name="read-and-anchor.scm:119"></a>                     ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=char=?">char=?</a> #\| ch)
<a name="read-and-anchor.scm:120"></a>                      (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> ch)
<a name="read-and-anchor.scm:121"></a>                      (lp (<a href="http://practical-scheme.net/gauche/man/?l=en&p=read-char">read-char</a>) (<a href="http://practical-scheme.net/gauche/man/?l=en&p=+">+</a> n 1)))
<a name="read-and-anchor.scm:122"></a>                     (<a href="http://practical-scheme.net/gauche/man/?l=en&p=else">else</a>
<a name="read-and-anchor.scm:123"></a>                      (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> ch)
<a name="read-and-anchor.scm:124"></a>                      (lp (<a href="http://practical-scheme.net/gauche/man/?l=en&p=read-char">read-char</a>) n)))))
<a name="read-and-anchor.scm:125"></a>            (<a href="http://practical-scheme.net/gauche/man/?l=en&p=else">else</a>
<a name="read-and-anchor.scm:126"></a>             (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> ch)
<a name="read-and-anchor.scm:127"></a>             (lp (<a href="http://practical-scheme.net/gauche/man/?l=en&p=read-char">read-char</a>) n)))))
<a name="read-and-anchor.scm:128"></a>
<a name="read-and-anchor.scm:129"></a>  (<a href="http://practical-scheme.net/gauche/man/?l=en&p=define">define</a> (do-string-interpolation)
<a name="read-and-anchor.scm:130"></a>    (<a href="http://practical-scheme.net/gauche/man/?l=en&p=read-char">read-char</a>) ; #\"
<a name="read-and-anchor.scm:131"></a>    (<a href="http://practical-scheme.net/gauche/man/?l=en&p=let">let</a> ((str (<a href="read-and-anchor.scm.html#read-and-anchor.scm:32">read-string-w/o-escape</a> (<a href="http://practical-scheme.net/gauche/man/?l=en&p=read-char">read-char</a>) '())))
<a name="read-and-anchor.scm:132"></a>      (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> #\") ; (disp #\-)  (print "BEGIN") (display str) (print "\nEND")
<a name="read-and-anchor.scm:133"></a>      (<a href="http://practical-scheme.net/gauche/man/?l=en&p=with-input-from-string">with-input-from-string</a> str
<a name="read-and-anchor.scm:134"></a>        (<a href="http://practical-scheme.net/gauche/man/?l=en&p=lambda">lambda</a> ()
<a name="read-and-anchor.scm:135"></a>          (<a href="http://practical-scheme.net/gauche/man/?l=en&p=let">let</a> lp ((ch (<a href="http://practical-scheme.net/gauche/man/?l=en&p=read-char">read-char</a>)))
<a name="read-and-anchor.scm:136"></a>            (<a href="http://practical-scheme.net/gauche/man/?l=en&p=cond">cond</a> ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=eof-object?">eof-object?</a> ch) #t)
<a name="read-and-anchor.scm:137"></a>                  ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=char=?">char=?</a> #\~ ch)
<a name="read-and-anchor.scm:138"></a>                   (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> ch)
<a name="read-and-anchor.scm:139"></a>                   (<a href="http://practical-scheme.net/gauche/man/?l=en&p=cond">cond</a> ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=char=?">char=?</a> (<a href="http://practical-scheme.net/gauche/man/?l=en&p=peek-char">peek-char</a>) #\~)
<a name="read-and-anchor.scm:140"></a>                          (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> (<a href="http://practical-scheme.net/gauche/man/?l=en&p=read-char">read-char</a>))
<a name="read-and-anchor.scm:141"></a>                          (lp (<a href="http://practical-scheme.net/gauche/man/?l=en&p=read-char">read-char</a>)))
<a name="read-and-anchor.scm:142"></a>                         (<a href="http://practical-scheme.net/gauche/man/?l=en&p=else">else</a>
<a name="read-and-anchor.scm:143"></a>                          (<a href="read-and-anchor.scm.html#read-and-anchor.scm:254">read-and-anchor</a> lvl)
<a name="read-and-anchor.scm:144"></a>                          (lp (<a href="http://practical-scheme.net/gauche/man/?l=en&p=read-char">read-char</a>)))))
<a name="read-and-anchor.scm:145"></a>                  (<a href="http://practical-scheme.net/gauche/man/?l=en&p=else">else</a>
<a name="read-and-anchor.scm:146"></a>                   (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> ch)
<a name="read-and-anchor.scm:147"></a>                   (lp (<a href="http://practical-scheme.net/gauche/man/?l=en&p=read-char">read-char</a>)))))))
<a name="read-and-anchor.scm:148"></a>      (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> #\")
<a name="read-and-anchor.scm:149"></a>      'int-string))
<a name="read-and-anchor.scm:150"></a>
<a name="read-and-anchor.scm:151"></a>  (<a href="http://practical-scheme.net/gauche/man/?l=en&p=define">define</a> (do-char)
<a name="read-and-anchor.scm:152"></a>    ;; this works as long as ewline of #\newline
<a name="read-and-anchor.scm:153"></a>    ;; has no manual entry, for example.
<a name="read-and-anchor.scm:154"></a>    (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> (<a href="http://practical-scheme.net/gauche/man/?l=en&p=read-char">read-char</a>)) ; #\\
<a name="read-and-anchor.scm:155"></a>    (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> (<a href="http://practical-scheme.net/gauche/man/?l=en&p=read-char">read-char</a>))
<a name="read-and-anchor.scm:156"></a>    'character)
<a name="read-and-anchor.scm:157"></a>
<a name="read-and-anchor.scm:158"></a>  (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> #\#)
<a name="read-and-anchor.scm:159"></a>  (<a href="http://practical-scheme.net/gauche/man/?l=en&p=let">let</a> ((ch (<a href="http://practical-scheme.net/gauche/man/?l=en&p=peek-char">peek-char</a>)))
<a name="read-and-anchor.scm:160"></a>    (<a href="http://practical-scheme.net/gauche/man/?l=en&p=cond">cond</a> ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=eof-object?">eof-object?</a> ch) (<a href="http://practical-scheme.net/gauche/man/?l=en&p=error">error</a> "Unexpected EOF"))
<a name="read-and-anchor.scm:161"></a>          ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=char=?">char=?</a> #\? ch)  (do-debug))
<a name="read-and-anchor.scm:162"></a>          ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=char=?">char=?</a> #\( ch)  (do-vector))
<a name="read-and-anchor.scm:163"></a>          ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=char=?">char=?</a> #\/ ch)  (do-regexp))
<a name="read-and-anchor.scm:164"></a>          ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=char=?">char=?</a> #\[ ch)  (do-char-set))
<a name="read-and-anchor.scm:165"></a>          ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=char=?">char=?</a> #\| ch)  (do-multiline-comment))
<a name="read-and-anchor.scm:166"></a>          ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=char=?">char=?</a> #\" ch)  (do-string-interpolation))
<a name="read-and-anchor.scm:167"></a>          ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=char=?">char=?</a> #\\ ch)  (do-char))
<a name="read-and-anchor.scm:168"></a>          (<a href="http://practical-scheme.net/gauche/man/?l=en&p=else">else</a>
<a name="read-and-anchor.scm:169"></a>           (<a href="http://practical-scheme.net/gauche/man/?l=en&p=read-char">read-char</a>)
<a name="read-and-anchor.scm:170"></a>           (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> ch)
<a name="read-and-anchor.scm:171"></a>           'ignored))))
<a name="read-and-anchor.scm:172"></a>
<a name="read-and-anchor.scm:173"></a>(<a href="http://practical-scheme.net/gauche/man/?l=en&p=define">define</a> (<a href="read-and-anchor.scm.html#read-and-anchor.scm:173">do-bar</a>)
<a name="read-and-anchor.scm:174"></a>  ;; we do not anchor this type of symbol.
<a name="read-and-anchor.scm:175"></a>  (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> #\|)
<a name="read-and-anchor.scm:176"></a>  (<a href="http://practical-scheme.net/gauche/man/?l=en&p=let">let</a> lp ((ch (<a href="http://practical-scheme.net/gauche/man/?l=en&p=read-char">read-char</a>)))
<a name="read-and-anchor.scm:177"></a>    (<a href="http://practical-scheme.net/gauche/man/?l=en&p=cond">cond</a> ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=eof-object?">eof-object?</a> ch) (<a href="http://practical-scheme.net/gauche/man/?l=en&p=error">error</a> "EOF inside |"))
<a name="read-and-anchor.scm:178"></a>          ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=char=?">char=?</a> #\| ch)  (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> ch) 'symbol)
<a name="read-and-anchor.scm:179"></a>          ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=char=?">char=?</a> #\\ ch)
<a name="read-and-anchor.scm:180"></a>           (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> ch)
<a name="read-and-anchor.scm:181"></a>           (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> (<a href="http://practical-scheme.net/gauche/man/?l=en&p=read-char">read-char</a>))
<a name="read-and-anchor.scm:182"></a>           (lp (<a href="http://practical-scheme.net/gauche/man/?l=en&p=read-char">read-char</a>)))
<a name="read-and-anchor.scm:183"></a>          (<a href="http://practical-scheme.net/gauche/man/?l=en&p=else">else</a>
<a name="read-and-anchor.scm:184"></a>           (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> ch)
<a name="read-and-anchor.scm:185"></a>           (lp (<a href="http://practical-scheme.net/gauche/man/?l=en&p=read-char">read-char</a>))))))
<a name="read-and-anchor.scm:186"></a>
<a name="read-and-anchor.scm:187"></a>(<a href="http://practical-scheme.net/gauche/man/?l=en&p=define">define</a> (<a href="read-and-anchor.scm.html#read-and-anchor.scm:187">do-string</a>)
<a name="read-and-anchor.scm:188"></a>  (<a href="http://practical-scheme.net/gauche/man/?l=en&p=let">let</a> ((str (<a href="read-and-anchor.scm.html#read-and-anchor.scm:32">read-string-w/o-escape</a> (<a href="http://practical-scheme.net/gauche/man/?l=en&p=read-char">read-char</a>) '())))
<a name="read-and-anchor.scm:189"></a>    (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> #\") (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> str) (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> #\")
<a name="read-and-anchor.scm:190"></a>    'string))
<a name="read-and-anchor.scm:191"></a>
<a name="read-and-anchor.scm:192"></a>(<a href="http://practical-scheme.net/gauche/man/?l=en&p=define">define</a> (<a href="read-and-anchor.scm.html#read-and-anchor.scm:192">do-quote</a> lvl)
<a name="read-and-anchor.scm:193"></a>  (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> #\')
<a name="read-and-anchor.scm:194"></a>  (<a href="read-and-anchor.scm.html#read-and-anchor.scm:306">read-w/o-anchor</a> lvl))
<a name="read-and-anchor.scm:195"></a>
<a name="read-and-anchor.scm:196"></a>(<a href="http://practical-scheme.net/gauche/man/?l=en&p=define">define</a> (<a href="read-and-anchor.scm.html#read-and-anchor.scm:196">do-quasi-quote</a> lvl)
<a name="read-and-anchor.scm:197"></a>  (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> #\`)
<a name="read-and-anchor.scm:198"></a>  (<a href="read-and-anchor.scm.html#read-and-anchor.scm:306">read-w/o-anchor</a> lvl))
<a name="read-and-anchor.scm:199"></a>
<a name="read-and-anchor.scm:200"></a>(<a href="http://practical-scheme.net/gauche/man/?l=en&p=define">define</a> (<a href="read-and-anchor.scm.html#read-and-anchor.scm:200">do-comment</a>)
<a name="read-and-anchor.scm:201"></a>  (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> #\;)
<a name="read-and-anchor.scm:202"></a>  (<a href="read-and-anchor.scm.html#read-and-anchor.scm:205">skip-until-newline</a>)
<a name="read-and-anchor.scm:203"></a>  'comment)
<a name="read-and-anchor.scm:204"></a>
<a name="read-and-anchor.scm:205"></a>(<a href="http://practical-scheme.net/gauche/man/?l=en&p=define">define</a> (<a href="read-and-anchor.scm.html#read-and-anchor.scm:205">skip-until-newline</a>)
<a name="read-and-anchor.scm:206"></a>  (<a href="http://practical-scheme.net/gauche/man/?l=en&p=let">let</a> ((ch (<a href="http://practical-scheme.net/gauche/man/?l=en&p=read-char">read-char</a>)))
<a name="read-and-anchor.scm:207"></a>    (<a href="http://practical-scheme.net/gauche/man/?l=en&p=cond">cond</a> ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=eof-object?">eof-object?</a> ch) ch)
<a name="read-and-anchor.scm:208"></a>          ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=char=?">char=?</a> #\newline ch)
<a name="read-and-anchor.scm:209"></a>           (<a href="read-and-anchor.scm.html#read-and-anchor.scm:55">do-newline</a>))
<a name="read-and-anchor.scm:210"></a>          (<a href="http://practical-scheme.net/gauche/man/?l=en&p=else">else</a>
<a name="read-and-anchor.scm:211"></a>           (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> ch)
<a name="read-and-anchor.scm:212"></a>           (<a href="read-and-anchor.scm.html#read-and-anchor.scm:205">skip-until-newline</a>)))))
<a name="read-and-anchor.scm:213"></a>
<a name="read-and-anchor.scm:214"></a>(<a href="http://practical-scheme.net/gauche/man/?l=en&p=define">define</a> (<a href="read-and-anchor.scm.html#read-and-anchor.scm:214">anchor</a> entry filename lineno)
<a name="read-and-anchor.scm:215"></a>
<a name="read-and-anchor.scm:216"></a>  (<a href="http://practical-scheme.net/gauche/man/?l=en&p=define">define</a> (has-source? entry) (<a href="http://practical-scheme.net/gauche/man/?l=en&p=string?">string?</a> (file-of entry)))
<a name="read-and-anchor.scm:217"></a>
<a name="read-and-anchor.scm:218"></a>  (<a href="http://practical-scheme.net/gauche/man/?l=en&p=define">define</a> (self? entry)
<a name="read-and-anchor.scm:219"></a>    (<a href="http://practical-scheme.net/gauche/man/?l=en&p=and">and</a> (<a href="read-and-anchor.scm.html#read-and-anchor.scm:10">place-goto-anchor</a>)
<a name="read-and-anchor.scm:220"></a>         (<a href="http://practical-scheme.net/gauche/man/?l=en&p==">=</a> lineno (line-of entry))
<a name="read-and-anchor.scm:221"></a>         (<a href="http://practical-scheme.net/gauche/man/?l=en&p=string=?">string=?</a> filename
<a name="read-and-anchor.scm:222"></a>                   (file-of entry))))
<a name="read-and-anchor.scm:223"></a>
<a name="read-and-anchor.scm:224"></a>  (<a href="http://practical-scheme.net/gauche/man/?l=en&p=cond">cond</a> ((self? entry)
<a name="read-and-anchor.scm:225"></a>         (<a href="http://practical-scheme.net/gauche/man/?l=en&p=display">display</a> #"&lt;a href=\"~(<a href="path-util.scm.html#path-util.scm:45">path-to-top</a> (file-of entry))../goto?file=~(file-of entry)&amp;line=~(line-of entry)\"&gt;")
<a name="read-and-anchor.scm:226"></a>         (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> (name-of entry))
<a name="read-and-anchor.scm:227"></a>         (<a href="http://practical-scheme.net/gauche/man/?l=en&p=display">display</a> "&lt;/a&gt;"))
<a name="read-and-anchor.scm:228"></a>
<a name="read-and-anchor.scm:229"></a>        ((has-source? entry)
<a name="read-and-anchor.scm:230"></a>         (<a href="dictionary.scm.html#dictionary.scm:165">entry-ref-push!</a> entry filename lineno)
<a name="read-and-anchor.scm:231"></a>         (<a href="http://practical-scheme.net/gauche/man/?l=en&p=format">format</a> #t "&lt;a href=\"~a#~a:~a\"&gt;"
<a name="read-and-anchor.scm:232"></a>                 (<a href="path-util.scm.html#path-util.scm:80">relative-path</a> filename #"~(file-of entry)~(<a href="read-and-anchor.scm.html#read-and-anchor.scm:9">anchor-file-extension</a>)")
<a name="read-and-anchor.scm:233"></a>                 (file-of entry)
<a name="read-and-anchor.scm:234"></a>                 (line-of entry))
<a name="read-and-anchor.scm:235"></a>         (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> (name-of entry))
<a name="read-and-anchor.scm:236"></a>         (<a href="http://practical-scheme.net/gauche/man/?l=en&p=display">display</a> "&lt;/a&gt;"))
<a name="read-and-anchor.scm:237"></a>
<a name="read-and-anchor.scm:238"></a>        (<a href="http://practical-scheme.net/gauche/man/?l=en&p=else">else</a>
<a name="read-and-anchor.scm:239"></a>         (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> (name-of entry)))))
<a name="read-and-anchor.scm:240"></a>
<a name="read-and-anchor.scm:241"></a>(<a href="http://practical-scheme.net/gauche/man/?l=en&p=define">define</a> (<a href="read-and-anchor.scm.html#read-and-anchor.scm:241">anchor-line</a>)
<a name="read-and-anchor.scm:242"></a>  (<a href="http://practical-scheme.net/gauche/man/?l=en&p=format">format</a> #t "&lt;a name=\"~a:~a\"&gt;&lt;/a&gt;"
<a name="read-and-anchor.scm:243"></a>          (<a href="http://practical-scheme.net/gauche/man/?l=en&p=port-name">port-name</a> (<a href="http://practical-scheme.net/gauche/man/?l=en&p=current-input-port">current-input-port</a>))
<a name="read-and-anchor.scm:244"></a>          (<a href="http://practical-scheme.net/gauche/man/?l=en&p=port-current-line">port-current-line</a> (<a href="http://practical-scheme.net/gauche/man/?l=en&p=current-input-port">current-input-port</a>))))
<a name="read-and-anchor.scm:245"></a>
<a name="read-and-anchor.scm:246"></a>(<a href="http://practical-scheme.net/gauche/man/?l=en&p=define">define</a> (<a href="read-and-anchor.scm.html#read-and-anchor.scm:246">has-document?</a> sym)
<a name="read-and-anchor.scm:247"></a>  (<a href="http://practical-scheme.net/gauche/man/?l=en&p=or">or</a>
<a name="read-and-anchor.scm:248"></a>   ;; we assume all exported binding has manual entry.
<a name="read-and-anchor.scm:249"></a>   (<a href="http://practical-scheme.net/gauche/man/?l=en&p=global-variable-bound?">global-variable-bound?</a> (<a href="http://practical-scheme.net/gauche/man/?l=en&p=find-module">find-module</a> 'scmxref.used-modules)
<a name="read-and-anchor.scm:250"></a>                           sym)
<a name="read-and-anchor.scm:251"></a>   ;; or in case sym is name of a module which has manual entry
<a name="read-and-anchor.scm:252"></a>   (<a href="http://practical-scheme.net/gauche/man/?l=en&p=memq">memq</a> sym (<a href="dictionary.scm.html#dictionary.scm:8">documented-modules</a>))))
<a name="read-and-anchor.scm:253"></a>
<a name="read-and-anchor.scm:254"></a>(<a href="http://practical-scheme.net/gauche/man/?l=en&p=define">define</a> (<a href="read-and-anchor.scm.html#read-and-anchor.scm:254">read-and-anchor</a> lvl)
<a name="read-and-anchor.scm:255"></a>  (<a href="http://practical-scheme.net/gauche/man/?l=en&p=let">let</a> lp ((ch (<a href="http://practical-scheme.net/gauche/man/?l=en&p=read-char">read-char</a>)))
<a name="read-and-anchor.scm:256"></a>    (<a href="http://practical-scheme.net/gauche/man/?l=en&p=cond">cond</a> ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=eof-object?">eof-object?</a> ch) ch)
<a name="read-and-anchor.scm:257"></a>
<a name="read-and-anchor.scm:258"></a>          ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=char=?">char=?</a> #\nl ch) (<a href="read-and-anchor.scm.html#read-and-anchor.scm:55">do-newline</a>))
<a name="read-and-anchor.scm:259"></a>          ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=char=?">char=?</a> #\|  ch) (<a href="read-and-anchor.scm.html#read-and-anchor.scm:173">do-bar</a>))
<a name="read-and-anchor.scm:260"></a>          ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=char=?">char=?</a> #\"  ch) (<a href="read-and-anchor.scm.html#read-and-anchor.scm:187">do-string</a>))
<a name="read-and-anchor.scm:261"></a>          ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=char=?">char=?</a> #\;  ch) (<a href="read-and-anchor.scm.html#read-and-anchor.scm:200">do-comment</a>))
<a name="read-and-anchor.scm:262"></a>          ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=char=?">char=?</a> #\'  ch) (<a href="read-and-anchor.scm.html#read-and-anchor.scm:192">do-quote</a> lvl))
<a name="read-and-anchor.scm:263"></a>          ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=char=?">char=?</a> #\`  ch) (<a href="read-and-anchor.scm.html#read-and-anchor.scm:196">do-quasi-quote</a> lvl))
<a name="read-and-anchor.scm:264"></a>          ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=char=?">char=?</a> #\#  ch) (<a href="read-and-anchor.scm.html#read-and-anchor.scm:61">do-sharp</a> lvl))
<a name="read-and-anchor.scm:265"></a>
<a name="read-and-anchor.scm:266"></a>          ;; FIXME not quite correct but it is needed
<a name="read-and-anchor.scm:267"></a>          ;; to process string interpolation
<a name="read-and-anchor.scm:268"></a>          ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=char=?">char=?</a> #\\  ch)
<a name="read-and-anchor.scm:269"></a>           (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> ch)
<a name="read-and-anchor.scm:270"></a>           (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> (<a href="http://practical-scheme.net/gauche/man/?l=en&p=read-char">read-char</a>))
<a name="read-and-anchor.scm:271"></a>           (lp (<a href="http://practical-scheme.net/gauche/man/?l=en&p=read-char">read-char</a>)))
<a name="read-and-anchor.scm:272"></a>
<a name="read-and-anchor.scm:273"></a>          ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=char=?">char=?</a> #\)  ch)
<a name="read-and-anchor.scm:274"></a>           (<a href="http://practical-scheme.net/gauche/man/?l=en&p=if">if</a> (<a href="http://practical-scheme.net/gauche/man/?l=en&p=zero?">zero?</a> lvl) (<a href="http://practical-scheme.net/gauche/man/?l=en&p=error">error</a> "Extra close parenthesis"))
<a name="read-and-anchor.scm:275"></a>           (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> ch)
<a name="read-and-anchor.scm:276"></a>           'close-paren)
<a name="read-and-anchor.scm:277"></a>
<a name="read-and-anchor.scm:278"></a>          ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=char=?">char=?</a> #\( ch)
<a name="read-and-anchor.scm:279"></a>           (<a href="http://practical-scheme.net/gauche/man/?l=en&p=if">if</a> (<a href="http://practical-scheme.net/gauche/man/?l=en&p=and">and</a> (<a href="http://practical-scheme.net/gauche/man/?l=en&p=zero?">zero?</a> lvl) (<a href="http://practical-scheme.net/gauche/man/?l=en&p=not">not</a> (<a href="read-and-anchor.scm.html#read-and-anchor.scm:8">anchor-all-lines</a>)))
<a name="read-and-anchor.scm:280"></a>             (<a href="read-and-anchor.scm.html#read-and-anchor.scm:241">anchor-line</a>))
<a name="read-and-anchor.scm:281"></a>           (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> #\()
<a name="read-and-anchor.scm:282"></a>           (<a href="http://practical-scheme.net/gauche/man/?l=en&p=let">let</a> lp ()
<a name="read-and-anchor.scm:283"></a>             (<a href="http://practical-scheme.net/gauche/man/?l=en&p=let">let</a> ((x (<a href="read-and-anchor.scm.html#read-and-anchor.scm:254">read-and-anchor</a> (<a href="http://practical-scheme.net/gauche/man/?l=en&p=+">+</a> lvl 1))))
<a name="read-and-anchor.scm:284"></a>               (<a href="http://practical-scheme.net/gauche/man/?l=en&p=cond">cond</a> ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=eof-object?">eof-object?</a> x) (<a href="http://practical-scheme.net/gauche/man/?l=en&p=error">error</a> "unexpected EOF"))
<a name="read-and-anchor.scm:285"></a>                     ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=eq?">eq?</a> x 'close-paren) 'list)
<a name="read-and-anchor.scm:286"></a>                     (<a href="http://practical-scheme.net/gauche/man/?l=en&p=else">else</a> (lp))))))
<a name="read-and-anchor.scm:287"></a>
<a name="read-and-anchor.scm:288"></a>          ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=char-set-contains?">char-set-contains?</a> <a href="read-and-anchor.scm.html#read-and-anchor.scm:29">symbol-initial</a> ch)
<a name="read-and-anchor.scm:289"></a>           ;; Here we use let* to make sure filename and lineno
<a name="read-and-anchor.scm:290"></a>           ;; are set before calling read-symbol.
<a name="read-and-anchor.scm:291"></a>           (<a href="http://practical-scheme.net/gauche/man/?l=en&p=let*">let*</a> ((filename (<a href="http://practical-scheme.net/gauche/man/?l=en&p=port-name">port-name</a> (<a href="http://practical-scheme.net/gauche/man/?l=en&p=current-input-port">current-input-port</a>)))
<a name="read-and-anchor.scm:292"></a>                  (lineno   (<a href="http://practical-scheme.net/gauche/man/?l=en&p=port-current-line">port-current-line</a> (<a href="http://practical-scheme.net/gauche/man/?l=en&p=current-input-port">current-input-port</a>)))
<a name="read-and-anchor.scm:293"></a>                  (sym      (<a href="read-and-anchor.scm.html#read-and-anchor.scm:43">read-symbol</a> (<a href="http://practical-scheme.net/gauche/man/?l=en&p=peek-char">peek-char</a>) (<a href="http://practical-scheme.net/gauche/man/?l=en&p=list">list</a> ch))))
<a name="read-and-anchor.scm:294"></a>             (<a href="http://practical-scheme.net/gauche/man/?l=en&p=cond">cond</a> ((<a href="dictionary.scm.html#dictionary.scm:141">dictionary-get</a> sym)
<a name="read-and-anchor.scm:295"></a>                    <a href="http://practical-scheme.net/gauche/man/?l=en&p==>">=></a>
<a name="read-and-anchor.scm:296"></a>                    (<a href="http://practical-scheme.net/gauche/man/?l=en&p=lambda">lambda</a> (entry)
<a name="read-and-anchor.scm:297"></a>                      (<a href="read-and-anchor.scm.html#read-and-anchor.scm:214">anchor</a> entry filename lineno)))
<a name="read-and-anchor.scm:298"></a>                   ((<a href="read-and-anchor.scm.html#read-and-anchor.scm:246">has-document?</a>  sym)
<a name="read-and-anchor.scm:299"></a>                    (<a href="http://practical-scheme.net/gauche/man/?l=en&p=display">display</a> #"&lt;a href=\"~(<a href="read-and-anchor.scm.html#read-and-anchor.scm:11">gauche-man-base</a>)~|sym|\"&gt;~|sym|&lt;/a&gt;"))
<a name="read-and-anchor.scm:300"></a>                   (<a href="http://practical-scheme.net/gauche/man/?l=en&p=else">else</a> (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> sym))))
<a name="read-and-anchor.scm:301"></a>           'symbol)
<a name="read-and-anchor.scm:302"></a>          (<a href="http://practical-scheme.net/gauche/man/?l=en&p=else">else</a> ; #\. #\[ #\]
<a name="read-and-anchor.scm:303"></a>           (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> ch)
<a name="read-and-anchor.scm:304"></a>           (lp (<a href="http://practical-scheme.net/gauche/man/?l=en&p=read-char">read-char</a>))))))
<a name="read-and-anchor.scm:305"></a>
<a name="read-and-anchor.scm:306"></a>(<a href="http://practical-scheme.net/gauche/man/?l=en&p=define">define</a> (<a href="read-and-anchor.scm.html#read-and-anchor.scm:306">read-w/o-anchor</a> lvl) ; in quote
<a name="read-and-anchor.scm:307"></a>
<a name="read-and-anchor.scm:308"></a>  (<a href="http://practical-scheme.net/gauche/man/?l=en&p=define">define</a> (do-unquote)
<a name="read-and-anchor.scm:309"></a>    (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> #\,)
<a name="read-and-anchor.scm:310"></a>    (<a href="http://practical-scheme.net/gauche/man/?l=en&p=if">if</a> (<a href="http://practical-scheme.net/gauche/man/?l=en&p=char=?">char=?</a> (<a href="http://practical-scheme.net/gauche/man/?l=en&p=peek-char">peek-char</a>) #\@)
<a name="read-and-anchor.scm:311"></a>      (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> (<a href="http://practical-scheme.net/gauche/man/?l=en&p=read-char">read-char</a>)))
<a name="read-and-anchor.scm:312"></a>    (<a href="read-and-anchor.scm.html#read-and-anchor.scm:254">read-and-anchor</a> lvl))
<a name="read-and-anchor.scm:313"></a>
<a name="read-and-anchor.scm:314"></a>  (<a href="http://practical-scheme.net/gauche/man/?l=en&p=let">let</a> lp ((ch (<a href="http://practical-scheme.net/gauche/man/?l=en&p=read-char">read-char</a>)))
<a name="read-and-anchor.scm:315"></a>    (<a href="http://practical-scheme.net/gauche/man/?l=en&p=cond">cond</a> ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=eof-object?">eof-object?</a> ch) ch)
<a name="read-and-anchor.scm:316"></a>
<a name="read-and-anchor.scm:317"></a>          ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=char=?">char=?</a> #\nl ch) (<a href="read-and-anchor.scm.html#read-and-anchor.scm:55">do-newline</a>))
<a name="read-and-anchor.scm:318"></a>          ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=char=?">char=?</a> #\|  ch) (<a href="read-and-anchor.scm.html#read-and-anchor.scm:173">do-bar</a>))
<a name="read-and-anchor.scm:319"></a>          ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=char=?">char=?</a> #\"  ch) (<a href="read-and-anchor.scm.html#read-and-anchor.scm:187">do-string</a>))
<a name="read-and-anchor.scm:320"></a>          ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=char=?">char=?</a> #\;  ch) (<a href="read-and-anchor.scm.html#read-and-anchor.scm:200">do-comment</a>))
<a name="read-and-anchor.scm:321"></a>          ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=char=?">char=?</a> #\'  ch) (<a href="read-and-anchor.scm.html#read-and-anchor.scm:192">do-quote</a> lvl))
<a name="read-and-anchor.scm:322"></a>          ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=char=?">char=?</a> #\`  ch) (<a href="read-and-anchor.scm.html#read-and-anchor.scm:196">do-quasi-quote</a> lvl))
<a name="read-and-anchor.scm:323"></a>          ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=char=?">char=?</a> #\#  ch) (<a href="read-and-anchor.scm.html#read-and-anchor.scm:61">do-sharp</a> lvl))
<a name="read-and-anchor.scm:324"></a>          ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=char=?">char=?</a> #\,  ch) (do-unquote))
<a name="read-and-anchor.scm:325"></a>
<a name="read-and-anchor.scm:326"></a>          ;; FIXME not quite correct but it is needed
<a name="read-and-anchor.scm:327"></a>          ;; to process string interpolation
<a name="read-and-anchor.scm:328"></a>          ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=char=?">char=?</a> #\\  ch)
<a name="read-and-anchor.scm:329"></a>           (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> ch)
<a name="read-and-anchor.scm:330"></a>           (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> (<a href="http://practical-scheme.net/gauche/man/?l=en&p=read-char">read-char</a>))
<a name="read-and-anchor.scm:331"></a>           (lp (<a href="http://practical-scheme.net/gauche/man/?l=en&p=read-char">read-char</a>)))
<a name="read-and-anchor.scm:332"></a>
<a name="read-and-anchor.scm:333"></a>          ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=char=?">char=?</a> #\)  ch)
<a name="read-and-anchor.scm:334"></a>           (<a href="http://practical-scheme.net/gauche/man/?l=en&p=if">if</a> (<a href="http://practical-scheme.net/gauche/man/?l=en&p=zero?">zero?</a> lvl) (<a href="http://practical-scheme.net/gauche/man/?l=en&p=error">error</a> "Extra close parenthesis"))
<a name="read-and-anchor.scm:335"></a>           (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> ch)
<a name="read-and-anchor.scm:336"></a>           'close-paren)
<a name="read-and-anchor.scm:337"></a>
<a name="read-and-anchor.scm:338"></a>          ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=char=?">char=?</a> #\( ch)
<a name="read-and-anchor.scm:339"></a>           (<a href="http://practical-scheme.net/gauche/man/?l=en&p=if">if</a> (<a href="http://practical-scheme.net/gauche/man/?l=en&p=and">and</a> (<a href="http://practical-scheme.net/gauche/man/?l=en&p=zero?">zero?</a> lvl) (<a href="http://practical-scheme.net/gauche/man/?l=en&p=not">not</a> (<a href="read-and-anchor.scm.html#read-and-anchor.scm:8">anchor-all-lines</a>)))
<a name="read-and-anchor.scm:340"></a>             (<a href="read-and-anchor.scm.html#read-and-anchor.scm:241">anchor-line</a>))
<a name="read-and-anchor.scm:341"></a>           (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> #\()
<a name="read-and-anchor.scm:342"></a>           (<a href="http://practical-scheme.net/gauche/man/?l=en&p=let">let</a> lp ()
<a name="read-and-anchor.scm:343"></a>             (<a href="http://practical-scheme.net/gauche/man/?l=en&p=let">let</a> ((x (<a href="read-and-anchor.scm.html#read-and-anchor.scm:254">read-and-anchor</a> (<a href="http://practical-scheme.net/gauche/man/?l=en&p=+">+</a> lvl 1))))
<a name="read-and-anchor.scm:344"></a>               (<a href="http://practical-scheme.net/gauche/man/?l=en&p=cond">cond</a> ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=eof-object?">eof-object?</a> x) (<a href="http://practical-scheme.net/gauche/man/?l=en&p=error">error</a> "unexpected EOF"))
<a name="read-and-anchor.scm:345"></a>                     ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=eq?">eq?</a> x 'close-paren) 'list)
<a name="read-and-anchor.scm:346"></a>                     (<a href="http://practical-scheme.net/gauche/man/?l=en&p=else">else</a> (lp))))))
<a name="read-and-anchor.scm:347"></a>
<a name="read-and-anchor.scm:348"></a>          ((<a href="http://practical-scheme.net/gauche/man/?l=en&p=char-set-contains?">char-set-contains?</a> <a href="read-and-anchor.scm.html#read-and-anchor.scm:29">symbol-initial</a> ch)
<a name="read-and-anchor.scm:349"></a>           (<a href="http://practical-scheme.net/gauche/man/?l=en&p=let">let</a> ((sym (<a href="read-and-anchor.scm.html#read-and-anchor.scm:43">read-symbol</a> (<a href="http://practical-scheme.net/gauche/man/?l=en&p=peek-char">peek-char</a>) (<a href="http://practical-scheme.net/gauche/man/?l=en&p=list">list</a> ch))))
<a name="read-and-anchor.scm:350"></a>             (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> sym)
<a name="read-and-anchor.scm:351"></a>             ch))
<a name="read-and-anchor.scm:352"></a>          (<a href="http://practical-scheme.net/gauche/man/?l=en&p=else">else</a>
<a name="read-and-anchor.scm:353"></a>           (<a href="read-and-anchor.scm.html#read-and-anchor.scm:15">disp</a> ch)
<a name="read-and-anchor.scm:354"></a>           (lp (<a href="http://practical-scheme.net/gauche/man/?l=en&p=read-char">read-char</a>))))))
<a name="read-and-anchor.scm:355"></a>
<a name="read-and-anchor.scm:356"></a>(<a href="http://practical-scheme.net/gauche/man/?l=en&p=provide">provide</a> "scmxref/read-and-anchor")
<a name="read-and-anchor.scm:357"></a>
</pre>
<a href="../scmxref/index.html">index</a>
</body>
</html>
