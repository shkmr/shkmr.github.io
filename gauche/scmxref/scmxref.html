<html>
<head>
<title>scmxref</title>
<style>table.index {
    width: 100%;
}
th.index {
    text-align: left;
    vertical-align: top;
    width: 20%;
}

a {
  text-decoration: none;
}
a.menu {
  color: navy;
}
a.file {
  color: mediumblue;
}
a.remove {
  color: red;
}
a.entry {
  color: royalblue;
}
a.ref {
  color: green;
}
a.lineno {
  color: dimgray;
}
a.man {
  color: seagreen;
}
</style>
</head>
<body>
<a href="index.html">index</a>
<pre>
0001: #!/usr/bin/env gosh
0002: <a name="scmxref:2"></a>; -*- Scheme -*-
0003: <a name="scmxref:3"></a>;;;
0004: <a name="scmxref:4"></a>;;;   SCMXREF
0005: <a name="scmxref:5"></a>;;;
0006: <a name="scmxref:6"></a>;;;   Usage: scmxref file1.scm file2.scm ...
0007: <a name="scmxref:7"></a>;;;
0008: <a name="scmxref:8"></a>;;;   Will create file1.html, file2.html, ... and index.html.
0009: <a name="scmxref:9"></a>;;;
0010: <a name="scmxref:10"></a>(<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=use">use</a> <a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=gauche.parameter">gauche.parameter</a>)
0011: <a name="scmxref:11"></a>(<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=use">use</a> <a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=gauche.parseopt">gauche.parseopt</a>)
0012: <a name="scmxref:12"></a>(<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=use">use</a> <a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=file.util">file.util</a>)
0013: <a name="scmxref:13"></a>(<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=use">use</a> <a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=text.html-lite">text.html-lite</a>)
0014: <a name="scmxref:14"></a>(<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=use">use</a> <a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=text.tree">text.tree</a>)
0015: <a name="scmxref:15"></a>(<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=use">use</a> <a class="entry" href="scmxref.scm.html#scmxref.scm:1">scmxref</a>)
0016: <a name="scmxref:16"></a>(<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=use">use</a> <a class="entry" href="path-util.scm.html#path-util.scm:1">scmxref.path-util</a>)
0017: <a name="scmxref:17"></a>
0018: <a name="scmxref:18"></a>;;;
0019: <a name="scmxref:19"></a>;;;  Customize
0020: <a name="scmxref:20"></a>;;;
0021: <a name="scmxref:21"></a>;;(gauche-man-base "http://practical-scheme.net/wiliki/schemexref.cgi?")
0022: <a name="scmxref:22"></a>;;(gauche-man-base "http://practical-scheme.net/gauche/man/?l=en&amp;p="   )
0023: <a name="scmxref:23"></a>;;(gauche-man-base "http://practical-scheme.net/gauche/man/?l=jp&amp;p="   )
0024: <a name="scmxref:24"></a>;;(documented-modules '()) ; see dictionary.scm
0025: <a name="scmxref:25"></a>(<a class="entry" href="read-and-anchor.scm.html#read-and-anchor.scm:8">anchor-all-lines</a> #t)
0026: <a name="scmxref:26"></a>
0027: <a name="scmxref:27"></a>;;;
0028: <a name="scmxref:28"></a>;;;
0029: <a name="scmxref:29"></a>;;;
0030: <a name="scmxref:30"></a>(<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=define">define</a> <a class="entry" href="scmxref.html#scmxref:30">force-output</a> (<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=make-parameter">make-parameter</a> #f))
0031: <a name="scmxref:31"></a>(<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=define">define</a> <a class="entry" href="scmxref.html#scmxref:31">verbose</a>      (<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=make-parameter">make-parameter</a> #t))
0032: <a name="scmxref:32"></a>(<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=define">define</a> (<a class="entry" href="scmxref.html#scmxref:32">message</a> . x)   (<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=if">if</a> (<a class="entry" href="scmxref.html#scmxref:31">verbose</a>) (<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=apply">apply</a> <a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=print">print</a> x)))
0033: <a name="scmxref:33"></a>
0034: <a name="scmxref:34"></a>(<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=define">define</a> (<a class="entry" href="scmxref.html#scmxref:34">file-&gt;list-of-anchored-strings</a> file)
0035: <a name="scmxref:35"></a>  (<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=let*">let*</a> ((L (<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=string-split">string-split</a> (<a class="entry" href="read-and-anchor.scm.html#read-and-anchor.scm:265">file-&gt;anchored-string</a> file) #\newline))
0036: <a name="scmxref:36"></a>         (N (<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=length">length</a> L)))
0037: <a name="scmxref:37"></a>    (<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=map">map</a> (<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=lambda">lambda</a> (n l)
0038: <a name="scmxref:38"></a>           (<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=list">list</a> (<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=format">format</a> "~4,'0d: " n) l "\n"))
0039: <a name="scmxref:39"></a>         (<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=iota">iota</a> N 1) L)))
0040: <a name="scmxref:40"></a>
0041: <a name="scmxref:41"></a>(<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=define">define</a> (<a class="entry" href="scmxref.html#scmxref:41">generate-html-files</a> files dest-dir)
0042: <a name="scmxref:42"></a>
0043: <a name="scmxref:43"></a>  (<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=if">if</a> (<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=and">and</a> (<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=not">not</a> (<a class="entry" href="scmxref.html#scmxref:30">force-output</a>)) (<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=file-exists?">file-exists?</a> dest-dir))
0044: <a name="scmxref:44"></a>    (<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=error">error</a> #"~|dest-dir| already exists"))
0045: <a name="scmxref:45"></a>
0046: <a name="scmxref:46"></a>  (<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=for-each">for-each</a> (<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=lambda">lambda</a> (file)
0047: <a name="scmxref:47"></a>              (<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=let">let</a> ((outfile #"~|dest-dir|/~(<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=string-append">string-append</a> file \".html\")")
0048: <a name="scmxref:48"></a>                    (prefix (<a class="entry" href="path-util.scm.html#path-util.scm:45">path-to-top</a> file)))
0049: <a name="scmxref:49"></a>                (<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=make-directory*">make-directory*</a> (<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=sys-dirname">sys-dirname</a> outfile))
0050: <a name="scmxref:50"></a>                (<a class="entry" href="scmxref.html#scmxref:32">message</a> #"~|file| -&gt; ~|outfile|")
0051: <a name="scmxref:51"></a>                (<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=with-output-to-file">with-output-to-file</a> outfile
0052: <a name="scmxref:52"></a>                  (<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=lambda">lambda</a> ()
0053: <a name="scmxref:53"></a>                    (<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=write-tree">write-tree</a>
0054: <a name="scmxref:54"></a>                     (<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=html:html">html:html</a>
0055: <a name="scmxref:55"></a>                      (<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=html:head">html:head</a>
0056: <a name="scmxref:56"></a>                       (<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=html:title">html:title</a> file)
0057: <a name="scmxref:57"></a>                       (<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=html:style">html:style</a> <a class="entry" href="scmxref.scm.html#scmxref.scm:29">stylesheet</a>))
0058: <a name="scmxref:58"></a>                      (<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=html:body">html:body</a>
0059: <a name="scmxref:59"></a>                       (<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=html:a">html:a</a> :href #"~|prefix|index.html" "index")
0060: <a name="scmxref:60"></a>                       (<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=html:pre">html:pre</a>
0061: <a name="scmxref:61"></a>                        (<a class="entry" href="scmxref.html#scmxref:34">file-&gt;list-of-anchored-strings</a> file))
0062: <a name="scmxref:62"></a>                       (<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=html:a">html:a</a> :href #"~|prefix|index.html" "Index"))))))))
0063: <a name="scmxref:63"></a>            files))
0064: <a name="scmxref:64"></a>
0065: <a name="scmxref:65"></a>(<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=define">define</a> (<a class="entry" href="scmxref.html#scmxref:65">generate-files</a> files dest-dir)
0066: <a name="scmxref:66"></a>  (<a class="entry" href="scmxref.html#scmxref:41">generate-html-files</a> files dest-dir)
0067: <a name="scmxref:67"></a>  (<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=with-output-to-file">with-output-to-file</a> #"~|dest-dir|/index.html" <a class="entry" href="scmxref.scm.html#scmxref.scm:121">display-index.html</a>))
0068: <a name="scmxref:68"></a>
0069: <a name="scmxref:69"></a>;;;
0070: <a name="scmxref:70"></a>;;;  Main
0071: <a name="scmxref:71"></a>;;;
0072: <a name="scmxref:72"></a>(<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=define">define</a> (<a class="entry" href="scmxref.html#scmxref:72">usage</a> progname)
0073: <a name="scmxref:73"></a>  (<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=print">print</a> "\
0074: usage: " progname " [options] [file ...]
0075: options:
0076:         -h          Print this message
0077:         -q          Quiet mode
0078:         -d dest     Specify directory where html files are created. Default is html
0079:         -f          Force output even if dest exists.")
0080: <a name="scmxref:80"></a>  (<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=exit">exit</a> 0))
0081: <a name="scmxref:81"></a>
0082: <a name="scmxref:82"></a>(<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=define">define</a> (<a class="entry" href="scmxref.html#scmxref:82">main</a> args)
0083: <a name="scmxref:83"></a>  (<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=let-args">let-args</a> (<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=cdr">cdr</a> args)
0084: <a name="scmxref:84"></a>      ((#f         "q|quiet"   <a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p==>">=&gt;</a> (<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=cut">cut</a> <a class="entry" href="scmxref.html#scmxref:31">verbose</a> #f))
0085: <a name="scmxref:85"></a>       (#f         "f|force"   <a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p==>">=&gt;</a> (<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=cut">cut</a> <a class="entry" href="scmxref.html#scmxref:30">force-output</a> #t))
0086: <a name="scmxref:86"></a>       (#f         "h|help"    <a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p==>">=&gt;</a> (<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=cut">cut</a> <a class="entry" href="scmxref.html#scmxref:72">usage</a> (<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=car">car</a> args)))
0087: <a name="scmxref:87"></a>       (dest-dir   "d|dest=s" "html")
0088: <a name="scmxref:88"></a>       . rest)
0089: <a name="scmxref:89"></a>    (<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=unless">unless</a> (<a class="man" href="http://practical-scheme.net/gauche/man/?l=en&p=null?">null?</a> rest)
0090: <a name="scmxref:90"></a>      (<a class="entry" href="dictionary.scm.html#dictionary.scm:266">build-dictionary</a> rest)
0091: <a name="scmxref:91"></a>      (<a class="entry" href="scmxref.html#scmxref:65">generate-files</a> rest dest-dir))
0092: <a name="scmxref:92"></a>    0))
0093: <a name="scmxref:93"></a>
0094: <a name="scmxref:94"></a>;;; EOF
0095: <a name="scmxref:95"></a>

</pre>
<a href="index.html">index</a>
</body>
</html>
